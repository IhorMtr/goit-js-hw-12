{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nexport async function getImagesByQuery(query, page) {\n  const config = {\n    baseURL: 'https://pixabay.com/api/',\n    params: {\n      key: '49660701-34943155f6893778b93ecffed',\n      q: `${query}`,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'true',\n      page: page,\n      per_page: 15,\n    },\n  };\n\n  try {\n    const response = await axios(config);\n    return response.data;\n  } catch (error) {\n    iziToast.show({\n      message: `Ooops, something went wrong, try again. ${error}`,\n      position: 'topRight',\n      messageColor: '#fff',\n      backgroundColor: 'red',\n    });\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet lightbox = null;\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n\nexport function createGallery(images) {\n  const galleryContainer = document.querySelector('.gallery');\n  let createdElements = [];\n  images.forEach(image => {\n    createdElements.push(`<li class=\"gallery-item\">\n\t<a class=\"gallery-link\" href=\"${image.webformatURL}\">\n  <div class=\"image-wrapper\">\n    <img \n      class=\"gallery-image\" \n      src=\"${image.largeImageURL}\" \n      alt=\"${image.tags}\" \n    />\n    \n    <div class=\"overlay-box\">\n      <div class=\"in-list-container\">\n        <h2 class=\"in-list-title\">Likes</h2>\n        <p class=\"in-list-p\">${image.likes}</p>\n      </div>\n      <div class=\"in-list-container\">\n        <h2 class=\"in-list-title\">Views</h2>\n        <p class=\"in-list-p\">${image.views}</p>\n      </div>\n      <div class=\"in-list-container\">\n        <h2 class=\"in-list-title\">Comments</h2>\n        <p class=\"in-list-p\">${image.comments}</p>\n      </div>\n      <div class=\"in-list-container\">\n        <h2 class=\"in-list-title\">Downloads</h2>\n        <p class=\"in-list-p\">${image.downloads}</p>\n      </div>\n    </div>\n  </div>\n</a>\n   \n</li>`);\n  });\n  galleryContainer.insertAdjacentHTML(\n    'beforeend',\n    `${createdElements.join('')}`\n  );\n\n  if (lightbox) {\n    lightbox.refresh();\n  } else {\n    lightbox = new SimpleLightbox('.gallery a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n      download: true,\n    });\n  }\n}\nexport function clearGallery() {\n  const galleryContainer = document.querySelector('.gallery');\n  galleryContainer.innerHTML = '';\n\n  if (lightbox) {\n    lightbox.destroy();\n    lightbox = null;\n  }\n}\nexport function showLoader() {\n  loader.classList.remove('display-none');\n}\nexport function hideLoader() {\n  loader.classList.add('display-none');\n}\n\nexport function showLoadMoreButton() {\n  loadMoreBtn.classList.remove('display-none');\n}\nexport function hideLoadMoreButton() {\n  loadMoreBtn.classList.add('display-none');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { getImagesByQuery } from './js/pixabay-api';\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n} from './js/render-functions';\n\nconst form = document.querySelector('.form');\nform.addEventListener('submit', handleSubmit);\n\nconst loadMoreBTn = document.querySelector('.load-more-btn');\nloadMoreBTn.addEventListener('click', handleLoading);\n\nlet page = 1;\nlet keyWord;\nlet oldKeyWord;\n\nasync function handleSubmit(event) {\n  event.preventDefault();\n  showLoader();\n  clearGallery();\n  const inputValue = form.elements['search-text'].value.trim();\n  keyWord = inputValue;\n  if (oldKeyWord !== keyWord) {\n    page = 1;\n    oldKeyWord = keyWord;\n  }\n  try {\n    const { hits } = await getImagesByQuery(inputValue, page);\n    if (hits.length === 0) {\n      iziToast.show({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n        messageColor: '#fff',\n        backgroundColor: 'red',\n      });\n    } else {\n      createGallery(hits);\n      showLoadMoreButton();\n    }\n  } catch (error) {\n    iziToast.show({\n      message: `Ooops, something went wrong, try again. ${error}`,\n      position: 'topRight',\n      messageColor: '#fff',\n      backgroundColor: 'red',\n    });\n  }\n  hideLoader();\n  form.reset();\n}\n\nasync function handleLoading() {\n  page++;\n  const galleryItemHeight =\n    document.querySelector('.gallery-item').getBoundingClientRect().height * 2 +\n    48;\n  showLoader();\n  hideLoadMoreButton();\n  try {\n    const { hits, totalHits } = await getImagesByQuery(keyWord, page);\n    let pagesLeft = Math.ceil(totalHits / 15) - page;\n    if (pagesLeft > 0) {\n      createGallery(hits);\n      window.scrollBy({\n        top: galleryItemHeight,\n        behavior: 'smooth',\n      });\n    } else {\n      iziToast.show({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n        messageColor: '#fff',\n        backgroundColor: 'red',\n      });\n      hideLoader();\n      hideLoadMoreButton();\n      return;\n    }\n  } catch (error) {\n    iziToast.show({\n      message: `Ooops, something went wrong, try again. ${error}`,\n      position: 'topRight',\n      messageColor: '#fff',\n      backgroundColor: 'red',\n    });\n  }\n  hideLoader();\n  showLoadMoreButton();\n}\n"],"names":["getImagesByQuery","query","page","config","axios","error","iziToast","lightbox","loader","loadMoreBtn","createGallery","images","galleryContainer","createdElements","image","SimpleLightbox","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","handleSubmit","loadMoreBTn","handleLoading","keyWord","oldKeyWord","event","inputValue","hits","galleryItemHeight","totalHits"],"mappings":"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"}